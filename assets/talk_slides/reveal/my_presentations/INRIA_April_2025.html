<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Community detection on geometric graphs</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../dist/reveal.css">
		<link rel="stylesheet" href="../dist/theme/night.css" id="theme">
		<link rel="stylesheet" href="../dist/addons/envs.css" id="envs">
		<style type="text/css" media="screen">
			.slides section.has-dark-background,
			.slides section.has-dark-background h2 {
				color: #fff;
			}
			.slides section.has-light-background,
			.slides section.has-light-background h2 {
				color: #222;
			}
		</style>
		<style>
			.container{
				display: flex;
			}
			.col{
				flex: 1;
			}
			</style>
			<style>
				canvas {
					border: 1px solid rgb(247, 245, 245);
				}
			</style>
			<!--Styles for text-->
			<style>
			.small {
				font-size: 25px;
			  }
			.medium {
			font-size: 35px;
			}
			.smaller{
				font-size: 20px;
			}
			</style>
			<style>
				.circle {
					width: 50px; /* Adjust size */
					height: 50px; /* Adjust size */
					border-radius: 50%;
					border: 4px solid #3498db;
					background-color: transparent; /* Circle color */
					position: absolute;
					top: 50%; /* Adjust vertical position */
					left: 50%; /* Adjust horizontal position */
					transform: translate(-50%, -50%);
				}
			</style>
	</head>

    <body>

		<div class="reveal">

			<div class="slides">

				<section>
					<h3  style="margin-top: 2cm;">Spatial Queues with Nearest Neighbour Shifts</h3>
					<h4 style="margin-top: 3cm;"> <span id="yellow_heading"  >B. R. Vinay Kumar</span> & <strong>Lasse Leskelä</strong></p></h4>
                    <canvas id="stickQueueCanvas" width="1280" height="720" style="border:0; background:transparent; position:absolute; top:0; left:0; z-index:-1;"></canvas>
					<p id="small" style="margin-top: 3cm;">INRIA NIM<br>April 15, 2025<br>Sophia Antipolis, France</psmall>
				</section>

    <section>
      <h3>Motivation</h3>
      <ul>
        <li>Modern service systems are spatial — think EV charging stations, supermarkets, or airports.</li>
        <li>Customers may move between servers based on local congestion.</li>
        <li><strong>Goal:</strong> Understand overload behavior when customers follow nearest neighbor shifting.</li>
      </ul>
    </section>


    <section>
        <h3>EV charging</h3>
        <div class="container">
            <div class="col small">
        <div class="r-stack">
            <div class="fragment" data-fragment-index="0"><div class="fragment fade-out" data-fragment-index="2">
            <img  src="./Images/evcs_dist.png" width = "700" height="600" style="margin-top: 0px; margin-bottom: 0px;"/></div></div>
            <img class="fragment" data-fragment-index="2" src="./Images/evcs_nn.png" width = "700" height="600"/>
            </div>
        </div>
        <div class="col small" style="text-align: left;">
            <br>
            <p id="small" class="fragment"  data-fragment-index="1"> J. Kang, C. Kan, and Z. Lin, <br><br>“Are Electric Vehicles Reshaping the City? An Investigation of the Clustering of Electric Vehicle Owners’ Dwellings and Their Interaction with Urban Spaces,”<br><br> ISPRS International Journal of Geo-Information, vol. 10, no. 5, May 2021.
            </p><br>
            </div>
        </div>
    </section>

    <section>
      <h3>System Model</h3>
      <br>
      <div class="small">
        <div class="container">
            <div class="col small">
      <ul>
        <li>$N$ service stations distributed uniformly $\{X_i\}_{i=1}^N \subset [0,1]^d$</li>
        <br><br>
        <li class="fragment" data-fragment-index="1">Each service station:
          <ul>
            <li>Service rate: $\mu$</li>
            <li>Arrival process: $\lambda$</li>
            <li>Infinite capacity</li>
          </ul>
        </li>
        <br><br>
        <li class="fragment" data-fragment-index="2">
            <span id="springgreen">\((k, p)\)-Nearest Neighbour Shift (NNS)</span>
            <ul>
              <li>Customer arrives at server $i$</li>
              <li>With probability $1 - p$, stays at $i$</li>
              <li>With probability $p$, chooses uniformly among $k$ nearest neighbours $\mathcal{N}_k(i)$</li>
            </ul></li>
      </ul>
    </div>
    <div class="col">
        <!--<canvas id="poissonCanvas" width="400" height="400"></canvas>
        <script src="poisson.js"></script>-->
        <div class="r-stack">
        <img data-fragment-index="0" src="./Images/spatial_queues/RGG_nodes.png" width = "400" height="400"/>
        <img class="fragment" data-fragment-index="1" src="./Images/spatial_queues/RGG_arrival.png" width = "400" height="400"/>
        <img class="fragment" data-fragment-index="2" src="./Images/spatial_queues/stay_1-p.png" width = "400" height="400"/>
        <img class="fragment" data-fragment-index="3" src="./Images/spatial_queues/kNN_p.png" width = "400" height="400"/>
        </div>
        <div class="r-stack">
            <img data-fragment-index="0" src="./Images/spatial_queues/1d_servers.png" width = "400" height="60"/>
            <img class="fragment" data-fragment-index="1" src="./Images/spatial_queues/1d_arrivals.png" width = "400" height="80"/>
        </div>
    </div></div></div>
    </section>

    <section>
        <h3>Problem statement</h3>
        <div class="container">
            <div class="col small">
      
      <ul>
        <li>
            Define the effective arrival rate at server $i$:
      <p>\(\lambda_{\text{eff}}(i) = \)  <span id = "skyblue">\(\lambda(1 - p)\)</span>  \(+\) <span id = "orange">\(\sum_{j: i \in \mathcal{N}_k(j)} \frac{p}{k} \lambda\)</span></p>
        </li>
        <br>
    <li class="fragment" data-fragment-index="2">
        The <span id="mauve">load</span> at server $i$ is 
        $$\rho_i = \frac{\lambda_{\text{eff}}(i)}{\mu}$$
    </li>
    <br>
    <li class="fragment" data-fragment-index="2">
        A server is overloaded if $\rho_i > 1$
    </li>
    <br>
    <li class="fragment" data-fragment-index="2">
        The main object of interest:
      <p><span id="paleturquoise">\(\mathcal{O}_N\)</span> \(= \frac{1}{N} \left| \{ i : \rho_i > 1 \} \right|\)</p>
    </li>
    </ul>
            </div>
            <div class="col">
                <img class="fragment" data-fragment-index="1" src="./Images/spatial_queues/lambda_eff.png" width = "400" height="400"/>
                <br>
            <p class="small fragment"><span id="paleturquoise" data-fragment-index="2">Fraction of overloaded servers</span></p>
            </div>
            
        </div>
    </section>


    <section>
      <h3>Main Result: General Dimension</h3>
      <div class="container">
      <div class="col small">
      <ul>
        <br>
        <li class="fragment" data-fragment-index="1">If $\frac{\lambda}{\mu} \leq \frac{1}{1 - p + \alpha_d p}$, then $\mathcal{O}_N = 0$ a.s. for all $N$.</li>
        <br>
        <li class="fragment" data-fragment-index="3">If $\frac{\lambda}{\mu} > \frac{1}{1 - p + \alpha_d p}$, then there exist constants \(q_{d,k,n}\) and \(\sigma_{d,k}\) such that
          <ul>
            <br>
            <li> <span id="orange">Law of large numbers: </span><br>
                <p><span id="paleturquoise">\(\ \ \ \ \ \mathcal{O}_N\)</span> \(\xrightarrow{\text{a.s.}} \sum_{n = \lfloor \theta \rfloor + 1}^{\alpha_d k} q_{d,k,n}\)</p>
                <p>where $\theta = k + \frac{k}{p} \left( \frac{\mu}{\lambda} - 1 \right)$</p>
            </li>
            <li> <span id="orange">Central limit theorem:</span><br>
                <span id="paleturquoise">\( \ \ \ \ \ \sqrt{N} (\mathcal{O}_N - \mathbb{E}[\mathcal{O}_N])\) </span>\(\xrightarrow{d} \mathcal{N}(0, \sigma_{d,k}^2)\)
            </li>
          </ul>
        </li>
      </ul>
    </div>
        <div class="col small">
            <img class="fragment" data-fragment-index="0" src="./Images/spatial_queues/lambda_eff.png" width = "300" height="300"/>
            <br>
            <img class="fragment" data-fragment-index="2" src="./Images/spatial_queues/kissing.png" width = "200" height="200"/>
                <br>
              <span class="fragment" data-fragment-index="2">  \(\alpha_d \le \text{ kissing number}\)</span>
        </div>
    </div>
    </section>

    <section>
        <h3>Main Result: \(d=1\) and \(k=1\)</h3>
        <div class="container">
        <div class="col small">
        <ul>
          <br>
          <li class="fragment" data-fragment-index="1">If $\frac{\lambda}{\mu} \leq \frac{1}{1 + p}$, then $\mathcal{O}_N = 0$ a.s. for all $N$.</li>
          <br>
          <li class="fragment" data-fragment-index="1">If $\frac{\lambda}{\mu} > \frac{1}{1 + p}$, then
            <ul>
              <br>
              <li> <span id="orange">Law of large numbers: </span><br>
                  <p><span id="paleturquoise">\(\ \ \ \ \ \mathcal{O}_N\)</span> \(\xrightarrow{\text{a.s.}} \frac{1}{4}\)</p>
              </li>
              <li> <span id="orange">Central limit theorem:</span><br>
                  <span id="paleturquoise">\( \ \ \ \ \ \sqrt{N} (\mathcal{O}_N - \mathbb{E}[\mathcal{O}_N])\) </span>\(\xrightarrow{d} \mathcal{N}(0, \frac{19}{240})\)
              </li>
              <br>
              <li> <span id="orange">Expected number:</span> For every $N\ge 4$, <br><br>
                <span id="paleturquoise">\( \ \ \ \ \  \mathbb{E} \big[\mathcal{O}_N\big]\) </span>\( =  \frac{1}{4}\)
            </li>
            </ul>
          </li>
        </ul>
      </div>
          <div class="col small">
            <br><br><br>
              <img class="fragment" data-fragment-index="0" src="./Images/spatial_queues/1d_arrivals.png" width = "400" height="80"/>
              <br><br><br>
              <img class="fragment" data-fragment-index="1" src="./Images/spatial_queues/1d_k=1.png" width = "400" height="80"/>
                  <br>
          </div>
      </div>
      </section>


    <section>
      <h2>1D Case – Explicit Formula</h2>
      <p>When $d=1$, $k=1$, and $\frac{\lambda}{\mu} \in \left( \frac{1}{1+p}, 1 \right]$:</p>
      <ul>
        <li>$\theta \in (1,2)$</li>
        <li>Only nodes with in-degree 2 are overloaded</li>
        <li>Fraction converges to $\frac{1}{4}$</li>
      </ul>
      <p>$$\mathbb{E}[\mathcal{O}_N] = \frac{1}{4}$$</p>
    </section>

    <section>
      <h2>Left–Right NNS Strategy</h2>
      <p>Customers choose left/right neighbor with probabilities $\ell$ and $r$ respectively</p>
      <p>Stay at $i$ with probability $1 - \ell - r$</p>
      <p><strong>Theorem:</strong> If $\lambda \leq \mu$, then $\mathcal{O}_N = 0$ a.s.</p>
    </section>

    <section>
      <h2>Graph Structure</h2>
      <ul>
        <li>Build a $k$-NN directed graph $G_{N,d,k}$</li>
        <li>Each node has out-degree $k$</li>
        <li>In-degree bounded by $\alpha_d k$</li>
        <li>Overload depends on in-degree of node</li>
      </ul>
    </section>

    <section>
      <h2>Numerical Simulations</h2>
      <p>Simulation over $N = 1000$ servers, $\lambda = 1$, $\mu = 1.25$</p>
      <ul>
        <li>Shifting probability $p \in \{0.25, 0.5, 0.75, 1.0\}$</li>
        <li>Observe histogram of overloaded servers</li>
      </ul>
      <img src="simulation-1d.png" alt="1D Simulation" style="width:80%">
    </section>

    <section>
      <h2>2D Simulation Results</h2>
      <ul>
        <li>Similar behavior: overload stabilizes around $\approx 25\%$</li>
        <li>Values from empirical $q_{2,1,j}$ via Monte Carlo</li>
      </ul>
      <img src="simulation-2d.png" alt="2D Simulation" style="width:80%">
    </section>

    <section>
      <h2>Future Work</h2>
      <ul>
        <li>State-dependent mobility strategies</li>
        <li>Adaptive NNS: shift only when overloaded</li>
        <li>Spatial clustering of overloads</li>
        <li>Extending to more general metric spaces</li>
      </ul>
    </section>

    <section>
      <h2>Conclusion</h2>
      <ul>
        <li>We model spatial queues under local shifting strategies</li>
        <li>Derived theoretical limits for overload under NNS</li>
        <li>Simulation results confirm analytic predictions</li>
      </ul>
      <p><em>Applications:</em> EV charging, service logistics, queue optimization</p>
    </section>

    <section>
      <h2>Thanks!</h2>
      <p>Questions?</p>
    </section>

  </div>
</div>

<script src="../dist/reveal.js"></script>
<script src="../plugin/math/math.js"></script>
<script>
	Reveal.initialize({
		history: true,
		transition: 'linear',

		mathjax2: {
			config: 'TeX-AMS_HTML-full',
			TeX: {
				Macros: {
					R: '\\mathbb{R}',
					set: [ '\\left\\{#1 \\; ; \\; #2\\right\\}', 2 ]
				}
			}
		},

		// There are three typesetters available
		// RevealMath.MathJax2 (default)
		// RevealMath.MathJax3
		// RevealMath.KaTeX
		//
		// More info at https://revealjs.com/math/
		plugins: [ RevealMath.MathJax2 ]
	});
</script>
<script>
	const myHeading = document.getElementById("yellow_heading");
	myHeading.style.color = "#e7ad52";
</script>
<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/map.js"></script>
<script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
<script src="../dist/addons/maps2.js"></script>


<script>
    const canvas = document.getElementById("stickQueueCanvas");
    const ctx = canvas.getContext("2d");

    const COLORS = ["#e74c3c", "#3498db", "#2ecc71", "#f1c40f", "#9b59b6"];
    const NUM_FIGURES = 20;

    const figures = Array.from({ length: NUM_FIGURES }, () => ({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      dx: (Math.random() - 0.5) * 2,
      dy: (Math.random() - 0.5) * 2,
      color: COLORS[Math.floor(Math.random() * COLORS.length)]
    }));

    function drawStickFigure(x, y, color) {
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;

      // Head
      ctx.beginPath();
      ctx.arc(x, y, 8, 0, Math.PI * 2);
      ctx.stroke();

      // Body
      ctx.beginPath();
      ctx.moveTo(x, y + 8);
      ctx.lineTo(x, y + 30);
      ctx.stroke();

      // Arms
      ctx.beginPath();
      ctx.moveTo(x - 10, y + 18);
      ctx.lineTo(x + 10, y + 18);
      ctx.stroke();

      // Legs
      ctx.beginPath();
      ctx.moveTo(x, y + 30);
      ctx.lineTo(x - 7, y + 45);
      ctx.moveTo(x, y + 30);
      ctx.lineTo(x + 7, y + 45);
      ctx.stroke();
    }

    function updateFigures() {
      for (const f of figures) {
        f.x += f.dx;
        f.y += f.dy;

        // Bounce off walls
        if (f.x < 10 || f.x > canvas.width - 10) f.dx *= -1;
        if (f.y < 10 || f.y > canvas.height - 50) f.dy *= -1;
      }
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      updateFigures();
      for (const f of figures) {
        drawStickFigure(f.x, f.y, f.color);
      }

      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
